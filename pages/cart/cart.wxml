<!--cart.wxml-->
<view wx:if="{{cartItemSet.length > 0}}">
  <view class="weui-cells weui-cells-order">
    <view class="weui-cell" wx:for="{{cartItemSet}}">
        <view class="weui-cell__hd">
          <image src="{{item.product.picUrl5}}"></image>
        </view>
        <view class="weui-cell__bd">
          {{item.product.name}}
          <view class="desc">
            <text>{{item.productAttr}}</text>
          </view>
        </view>
        <view class="weui-cell__ft">
          <text class="price" style="padding-right:10px">￥{{item.product.price || item.product.marketPrice}}</text>
          <text class="quantity">x{{item.quantity}}</text>
          <view bindtap="del" data-skucode="{{item.skuCode}}" data-id="{{item.product.productId}}" data-index="{{index}}">删除</view>
        </view>
    </view>
  </view>

  <view class="weui-cells weui-cells-order">
    <view class="weui-cell">
        <view class="weui-cell__bd">收货人信息</view>
    </view>
    <view class="weui-cell address">
      <view class="weui-cell__bd" bindtap="page" data-url="../address/address">
        <view wx:if="{{curReceiver.receiverId == null}}"> 添加收货信息</view>
        <view wx:if="{{curReceiver.receiverId != null}}">{{curReceiver.name}}, {{curReceiver.mobile}} <text style="color:#aaa">(修改)</text>
          <view class="address">{{curReceiver.address}}</view>
        </view>
      </view>
    </view>
  </view>

  <view class="weui-cells weui-cells-order">
    <picker bindchange="pickChange" value="{{deliveryIndex}}" range="{{deliveryList}}">
      <view class="weui-cell">
        <view class="weui-cell__bd">配送方式</view>
        <view class="weui-cell__ft" style="color:#aaa">{{deliveryList[deliveryIndex]}}</view>
      </view>
    </picker>
  </view>


  <view class="weui-cells weui-cells-order" style="margin-bottom:2.4rem;">
    <view class="weui-cell">
        <view class="weui-cell__bd">订单总价</view>
        <view class="weui-cell__ft">￥{{totalPrice + curPaymentConfig.paymentFee + curDelivery.deliveryFee}}</view>
    </view>
    <view class="weui-cell">
        <view class="weui-cell__bd">商品总价</view>
        <view class="weui-cell__ft">￥{{totalPrice}}</view>
    </view>
    <view class="weui-cell">
        <view class="weui-cell__bd">支付手续费</view>
        <view class="weui-cell__ft">￥{{curPaymentConfig.paymentFee}}</view>
    </view>
    <view class="weui-cell">
        <view class="weui-cell__bd">运费</view>
        <view class="weui-cell__ft">￥{{curDelivery.deliveryFee}}</view>
    </view>
  </view>
  <button class="btn-weixin fixed" bindtap="pay">使用微信支付</button>
</view>

<view wx:elif="{{cartItemSet.length === 0 && empty}}">
  <view class="emptyCart panel">
    <image src="../../images/cart.png"></image>
    <text>购物车还是空的</text>
    <button class="btn-primary" bindtap="pageIndex">到机汇商城逛逛</button>
  </view>
</view>
